{
  "author": "",
  "category": "Input",
  "extensionNamespace": "",
  "fullName": "Cursor Velocity",
  "helpPath": "",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWN1cnNvci1kZWZhdWx0LW91dGxpbmUiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTAuMDcsMTQuMjdDMTAuNTcsMTQuMDMgMTEuMTYsMTQuMjUgMTEuNCwxNC43NUwxMy43LDE5Ljc0TDE1LjUsMTguODlMMTMuMTksMTMuOTFDMTIuOTUsMTMuNDEgMTMuMTcsMTIuODEgMTMuNjcsMTIuNThMMTMuOTUsMTIuNUwxNi4yNSwxMi4wNUw4LDUuMTJWMTUuOUw5LjgyLDE0LjQzTDEwLjA3LDE0LjI3TTEzLjY0LDIxLjk3QzEzLjE0LDIyLjIxIDEyLjU0LDIyIDEyLjMxLDIxLjVMMTAuMTMsMTYuNzZMNy42MiwxOC43OEM3LjQ1LDE4LjkyIDcuMjQsMTkgNywxOUExLDEgMCAwLDEgNiwxOFYzQTEsMSAwIDAsMSA3LDJDNy4yNCwyIDcuNDcsMi4wOSA3LjY0LDIuMjNMNy42NSwyLjIyTDE5LjE0LDExLjg2QzE5LjU3LDEyLjIyIDE5LjYyLDEyLjg1IDE5LjI3LDEzLjI3QzE5LjEyLDEzLjQ1IDE4LjkxLDEzLjU3IDE4LjcsMTMuNjFMMTUuNTQsMTQuMjNMMTcuNzQsMTguOTZDMTgsMTkuNDYgMTcuNzYsMjAuMDUgMTcuMjYsMjAuMjhMMTMuNjQsMjEuOTdaIiAvPjwvc3ZnPg==",
  "name": "CursorVelocity",
  "previewIconUrl": "https://asset-resources.gdevelop.io/public-resources/Icons/8f81db7cf269c88bf0b13f816ee501ae786b3f15526d59c9d0005da09c13a18d_cursor-default-outline.svg",
  "shortDescription": "Expressions to track the movement speed of the cursor.",
  "version": "1.0.0",
  "description": "Useful for games where the player must control how fast they move the cursor.",
  "tags": [
    "cursor",
    "mouse",
    "velocity"
  ],
  "authorIds": [
    "8Ih1aa8f5gWUp4UB2BdhQ2iXWxJ3",
    "gqDaZjCfevOOxBYkK6zlhtZnXCg1"
  ],
  "dependencies": [],
  "eventsFunctions": [
    {
      "fullName": "",
      "functionType": "Action",
      "name": "onScenePreEvents",
      "sentence": "",
      "events": [
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Record the first non-zero position of the cursor",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::Or"
                  },
                  "parameters": [],
                  "subInstructions": [
                    {
                      "type": {
                        "value": "CursorX"
                      },
                      "parameters": [
                        "",
                        "!=",
                        "0",
                        "",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "CursorY"
                      },
                      "parameters": [
                        "",
                        "!=",
                        "0",
                        "",
                        ""
                      ]
                    }
                  ]
                },
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::Once"
                  },
                  "parameters": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "CursorVelocity::RecordCursorPosition"
                  },
                  "parameters": [
                    "",
                    ""
                  ]
                }
              ]
            }
          ],
          "parameters": []
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Compare cursor position during the pre event lifecycle to ensure the velocity value can be used by numerous events during the scene."
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.DistanceX",
                "=",
                "abs(CursorX(VariableString(__CursorVelocity.Layer), 0) - Variable(__CursorVelocity.PrevX))"
              ]
            },
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.DistanceY",
                "=",
                "abs(CursorY(VariableString(__CursorVelocity.Layer), 0) - Variable(__CursorVelocity.PrevY))"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.VelocityX",
                "=",
                "Variable(__CursorVelocity.DistanceX) / TimeDelta()"
              ]
            },
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.VelocityY",
                "=",
                "Variable(__CursorVelocity.DistanceY) / TimeDelta()"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.Velocity",
                "=",
                "sqrt(pow(Variable(__CursorVelocity.DistanceX), 2) + pow(Variable(__CursorVelocity.DistanceY), 2)) / TimeDelta()"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Update Max values"
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BuiltinCommonInstructions::CompareNumbers"
              },
              "parameters": [
                "CursorVelocity::CursorVelocity()",
                ">",
                "CursorVelocity::MaxCursorVelocity()"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.MaxVelocity",
                "=",
                "CursorVelocity::CursorVelocity()"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BuiltinCommonInstructions::CompareNumbers"
              },
              "parameters": [
                "CursorVelocity::CursorVelocityX()",
                ">",
                "CursorVelocity::MaxCursorVelocityX()"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.MaxVelocityX",
                "=",
                "CursorVelocity::CursorVelocityX()"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BuiltinCommonInstructions::CompareNumbers"
              },
              "parameters": [
                "CursorVelocity::CursorVelocityY()",
                ">",
                "CursorVelocity::MaxCursorVelocityY()"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.MaxVelocityY",
                "=",
                "CursorVelocity::CursorVelocityY()"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Update position variables for next frame"
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.PrevX",
                "=",
                "CursorX(VariableString(__CursorVelocity.Layer), 0)"
              ]
            },
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.PrevY",
                "=",
                "CursorY(VariableString(__CursorVelocity.Layer), 0)"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Velocity of the cursor in pixels per second.",
      "fullName": "Cursor velocity",
      "functionType": "ExpressionAndCondition",
      "group": "Cursor Velocity",
      "name": "CursorVelocity",
      "sentence": "velocity of the cursor",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "Variable(__CursorVelocity.Velocity)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Horizontal velocity of the cursor in pixels per second.",
      "fullName": "Horizontal cursor velocity",
      "functionType": "ExpressionAndCondition",
      "group": "Cursor Velocity",
      "name": "CursorVelocityX",
      "sentence": "horizontal velocity of the cursor",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "Variable(__CursorVelocity.VelocityX)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Vertical velocity of the cursor in pixels per second.",
      "fullName": "Vertical cursor velocity",
      "functionType": "ExpressionAndCondition",
      "group": "Cursor Velocity",
      "name": "CursorVelocityY",
      "sentence": "vertical velocity of the cursor",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "Variable(__CursorVelocity.VelocityY)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Max velocity of the cursor in pixels per second.",
      "fullName": "Max cursor velocity",
      "functionType": "ExpressionAndCondition",
      "group": "Cursor Velocity",
      "name": "MaxCursorVelocity",
      "sentence": "max velocity of the cursor",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "Variable(__CursorVelocity.MaxVelocity)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Max horizontal velocity (X) of the cursor in pixels per second.",
      "fullName": "Max horizontal cursor velocity",
      "functionType": "ExpressionAndCondition",
      "group": "Cursor Velocity",
      "name": "MaxCursorVelocityX",
      "sentence": "max horizontal velocity (X) of the cursor",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "Variable(__CursorVelocity.MaxVelocityX)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Max vertical velocity (Y) of the cursor in pixels per second.",
      "fullName": "Max vertical cursor velocity",
      "functionType": "ExpressionAndCondition",
      "group": "Cursor Velocity",
      "name": "MaxCursorVelocityY",
      "sentence": "max vertical velocity (Y) of the cursor",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "Variable(__CursorVelocity.MaxVelocityY)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Cursor moved last frame.",
      "fullName": "Cursor moved last frame",
      "functionType": "Condition",
      "name": "CursorJustMoved",
      "sentence": "Cursor moved last frame",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BuiltinCommonInstructions::CompareNumbers"
              },
              "parameters": [
                "CursorVelocity::CursorVelocity()",
                "!=",
                "0"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Reset max velocity of the cursor.",
      "fullName": "Reset max cursor velocity",
      "functionType": "Action",
      "name": "ResetMaxCursorVelocity",
      "sentence": "Reset max velocity of the cursor",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.MaxVelocity",
                "=",
                "0"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Reset max horizontal velocity (X) of the cursor.",
      "fullName": "Reset max horizontal cursor velocity",
      "functionType": "Action",
      "name": "ResetMaxCursorVelocityX",
      "sentence": "Reset max horizontal velocity (X) of the cursor",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.MaxVelocityX",
                "=",
                "0"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Reset max vertical velocity (Y) of the cursor.",
      "fullName": "Reset max vertical cursor velocity",
      "functionType": "Action",
      "name": "ResetMaxCursorVelocityY",
      "sentence": "Reset max vertical velocity (Y) of the cursor",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.MaxVelocityY",
                "=",
                "0"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Set layer used to calculate cursor velocity.",
      "fullName": "Set layer used to calculate cursor velocity",
      "functionType": "Action",
      "name": "SetCursorVelocityLayer",
      "sentence": "Use layer _PARAM1_ to calculate cursor velocity",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Set a new initial position to prevent max speed errors from \"teleporting\" to a new layer"
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VarSceneTxt"
              },
              "parameters": [
                "__CursorVelocity.Layer",
                "!=",
                "GetArgumentAsString(\"Layer\")"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarSceneTxt"
              },
              "parameters": [
                "__CursorVelocity.Layer",
                "=",
                "GetArgumentAsString(\"Layer\")"
              ]
            },
            {
              "type": {
                "value": "CursorVelocity::RecordCursorPosition"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Record the cursor position used to track cursor velocity.",
      "fullName": "Record the cursor position",
      "functionType": "Action",
      "name": "RecordCursorPosition",
      "private": true,
      "sentence": "Record the cursor position",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.PrevX",
                "=",
                "CursorX(VariableString(__CursorVelocity.Layer), 0)"
              ]
            },
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "__CursorVelocity.PrevY",
                "=",
                "CursorY(VariableString(__CursorVelocity.Layer), 0)"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [],
  "eventsBasedObjects": []
}